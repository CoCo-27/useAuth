function e(){return(e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function t(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}var r=function(){function r(t){var r=this;this.dispatch=t.dispatch,this.customPropertyNamespace=t.customPropertyNamespace,import("auth0-js").then(function(n){r.auth0=new(0,n.WebAuth)(e({},t))})}r.addDefaultParams=function(t,r){return e({redirectUri:r+"/auth0_callback",audience:"https://"+t.domain+"/api/v2/",responseType:"token id_token",scope:"openid profile email"},t)};var n=r.prototype;return n.authorize=function(){var e;null==(e=this.auth0)||e.authorize()},n.signup=function(){var e;null==(e=this.auth0)||e.authorize({mode:"signUp",screen_hint:"signup"})},n.logout=function(e){var t;null==(t=this.auth0)||t.logout({returnTo:e})},n.userId=function(e){return e.sub},n.userRoles=function(e){var t=e[(this.customPropertyNamespace+"/user_metadata").replace(/\/+user_metadata/,"/user_metadata")];return(null==t?void 0:t.roles)||null},n.handleLoginCallback=function(){try{var e=this;return Promise.resolve(new Promise(function(r,n){var o;null==(o=e.auth0)||o.parseHash(function(n,o){try{n&&(e.dispatch("ERROR",{error:n,errorType:"authResult"}),r(!1));var u=t(function(){return Promise.resolve(e.handleAuthResult(o)).then(function(e){r(e)})},function(t){e.dispatch("ERROR",{error:t,errorType:"handleAuth"}),r(!1)});return Promise.resolve(u&&u.then?u.then(function(){}):void 0)}catch(e){return Promise.reject(e)}})}))}catch(e){return Promise.reject(e)}},n.checkSession=function(){try{var e=this;return Promise.resolve(new Promise(function(r,n){var o;null==(o=e.auth0)||o.checkSession({},function(o,u){try{var i=function(){if(!o&&u&&u.accessToken&&u.idToken){var i=t(function(){return Promise.resolve(e.fetchUser(u)).then(function(e){r({user:e,authResult:u})})},function(e){n(e)});if(i&&i.then)return i.then(function(){})}else n(o||new Error("Session invalid"))}();return Promise.resolve(i&&i.then?i.then(function(){}):void 0)}catch(e){return Promise.reject(e)}})}))}catch(e){return Promise.reject(e)}},n.handleAuthResult=function(e){try{var t=this;return e&&e.accessToken&&e.idToken?Promise.resolve(t.fetchUser(e)).then(function(r){return t.dispatch("AUTHENTICATED",{authResult:e,user:r}),!0}):Promise.resolve(!1)}catch(e){return Promise.reject(e)}},n.fetchUser=function(e){try{var t=this;return Promise.resolve(new Promise(function(r,n){var o;null==(o=t.auth0)||o.client.userInfo((null==e?void 0:e.accessToken)||"",function(e,t){e?n(e):r(t)})}))}catch(e){return Promise.reject(e)}},r}();export{r as Auth0};
//# sourceMappingURL=auth0.esm.js.map
