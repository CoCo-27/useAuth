!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("auth0-js")):"function"==typeof define&&define.amd?define(["exports","auth0-js"],t):t((e||self).reactUseAuth={},e.auth0Js)}(this,function(e,t){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function n(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}e.Auth0=function(){function e(e){this.dispatch=e.dispatch,this.customPropertyNamespace=e.customPropertyNamespace,this.auth0=new t.WebAuth(r({},e))}e.addDefaultParams=function(e,t){return r({redirectUri:t+"/auth0_callback",audience:"https://"+e.domain+"/api/v2/",responseType:"token id_token",scope:"openid profile email"},e)};var o=e.prototype;return o.authorize=function(){this.auth0.authorize()},o.signup=function(){this.auth0.authorize({mode:"signUp",screen_hint:"signup"})},o.logout=function(e){this.auth0.logout({returnTo:e})},o.userId=function(e){return e.sub},o.userRoles=function(e){var t=e[(this.customPropertyNamespace+"/user_metadata").replace(/\/+user_metadata/,"/user_metadata")];return(null==t?void 0:t.roles)||null},o.handleLoginCallback=function(){try{var e=this;return Promise.resolve(new Promise(function(t,r){e.auth0.parseHash(function(r,o){try{r&&(e.dispatch("ERROR",{error:r,errorType:"authResult"}),t(!1));var i=n(function(){return Promise.resolve(e.handleAuthResult(o)).then(function(e){t(e)})},function(r){e.dispatch("ERROR",{error:r,errorType:"handleAuth"}),t(!1)});return Promise.resolve(i&&i.then?i.then(function(){}):void 0)}catch(e){return Promise.reject(e)}})}))}catch(e){return Promise.reject(e)}},o.checkSession=function(){try{var e=this;return Promise.resolve(new Promise(function(t,r){e.auth0.checkSession({},function(o,i){try{var u=function(){if(!o&&i&&i.accessToken&&i.idToken){var u=n(function(){return Promise.resolve(e.fetchUser(i)).then(function(e){t({user:e,authResult:i})})},function(e){r(e)});if(u&&u.then)return u.then(function(){})}else r(o||new Error("Session invalid"))}();return Promise.resolve(u&&u.then?u.then(function(){}):void 0)}catch(e){return Promise.reject(e)}})}))}catch(e){return Promise.reject(e)}},o.handleAuthResult=function(e){try{var t=this;return e&&e.accessToken&&e.idToken?Promise.resolve(t.fetchUser(e)).then(function(r){return t.dispatch("AUTHENTICATED",{authResult:e,user:r}),!0}):Promise.resolve(!1)}catch(e){return Promise.reject(e)}},o.fetchUser=function(e){try{var t=this;return Promise.resolve(new Promise(function(r,n){t.auth0.client.userInfo((null==e?void 0:e.accessToken)||"",function(e,t){e?n(e):r(t)})}))}catch(e){return Promise.reject(e)}},e}()});
//# sourceMappingURL=auth0.umd.js.map
