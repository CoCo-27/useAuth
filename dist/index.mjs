import e from"auth0-js";import t,{useReducer as n,useContext as o}from"react";var i="undefined"!=typeof window?window.location.protocol+"//"+window.location.host:"https://spark-joy.netlify.com/",a=t.createContext(null),u=function(t){var o=t.children,u=t.navigate,r=n(function(e,t){return e},{}),c=r[0],s=r[1],l=new e.WebAuth({domain:"sparkjoy.auth0.com",clientID:"GGfO12E5R8iHPBPh87bym5b3gzmdaYY9",redirectUri:i+"/auth0_callback",audience:"https://sparkjoy.auth0.com/api/v2/",responseType:"token id_token",scope:"openid profile email"});return console.log({useReducer:n}),h(a.Provider,{value:{state:c,dispatch:s,auth0:l,navigate:u}},o)},r=function(){var e=o(a),t=e.state,n=e.dispatch,i=e.auth0,u=e.navigate;return{isAuthenticated:function(){return t.expiresAt&&(new Date).getTime()<t.expiresAt},user:t.user,userId:t.user?t.user.sub:null,login:function(){i.authorize()},logout:function(){n({type:"logout"}),u("/")},handleAuthentication:function(){"undefined"!=typeof window&&i.parseHash(function(e,t){t&&t.accessToken&&t.idToken?function(e){i.client.userInfo(e.accessToken,function(t,o){t?console.log(t):n({type:"login",authResult:e,user:o}),u("/")})}(t):e&&console.log(e)})}}};export{u as AuthProvider,r as useAuth};
//# sourceMappingURL=index.mjs.map
