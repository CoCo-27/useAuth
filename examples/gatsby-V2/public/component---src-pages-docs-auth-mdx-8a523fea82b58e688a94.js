(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"8p/1":function(e,n,t){"use strict";t("E5k/");var a=t("qWyU"),o=t("CjxU"),r=t("uDoD"),i=t("b9RQ"),l=t("mf32"),c=t("BMxC"),s=t("qKvR"),d=t("7ljp"),u=(t("lfCk"),t("Wbzz")),b=t("q1tI"),p=t.n(b),m=t("eJLp"),h=t("sK1y"),g=t("XZ7F"),f=t("Weur"),j=t("y7Su"),O=t("IDkF"),v=t("OQ2h"),y=t("+NMY");function w(){var e=function(e,n){n||(n=e.slice(0));return e.raw=n,e}(["cursor: pointer; padding-bottom: 2px"]);return w=function(){return e},e}var x=function(){var e=Object(y.b)(),n=e.isAuthenticated,t=e.login,a=e.logout;return n()?Object(s.d)(p.a.Fragment,null,Object(s.d)(m.a,{onClick:a},"Logout")):Object(s.d)(p.a.Fragment,null,Object(s.d)(m.a,{onClick:t},"Login"))},E=function(e){var n=e.children;return Object(s.d)(h.a,{mt:{base:4,md:0},mr:4,display:"block",color:"sec"},n)},k=function(e){var n=Object(l.b)(),t=n.colorMode,o=n.toggleColorMode,r=Object(g.a)(),i=r.isOpen,d=r.onOpen,b=r.onClose,m=p.a.useRef();return Object(s.d)(f.a,Object.assign({as:"nav",align:"center",justify:"space-between",wrap:"wrap",padding:".6rem",bg:"light"===t?"grey.600":"grey.800",color:"light"===t?"black":"#ccc"},e),Object(s.d)(f.a,{align:"center"},Object(s.d)(c.a,{mt:1,ml:1,mr:3,display:{sm:"block",md:"none"},ref:m,onClick:d,css:Object(s.c)(w())},Object(s.d)("svg",{fill:"light"===t?"black":"white",width:"17px",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},Object(s.d)("title",null,"Menu"),Object(s.d)("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"}))),Object(s.d)(f.a,{align:"center",ml:1},Object(s.d)(j.a,{isOpen:i,placement:"left",onClose:b,finalFocusRef:m},Object(s.d)(j.d,null),Object(s.d)(j.c,null,Object(s.d)(j.b,null),Object(s.d)(O.f,null,"Docs"),Object(s.d)(O.b,null,Object(s.d)(u.Link,{to:"/docs/test"},"Getting Started")),Object(s.d)(O.e,null,"Drawer Footer content"))),Object(s.d)(u.Link,{to:"/"},Object(s.d)(a.a,{as:"h1",size:"xl",color:"pri",style:{letterSpacing:"-3px"}},"useAuth")))),Object(s.d)(c.a,{display:{xs:"none",sm:"none",md:"flex"},width:{sm:"full",md:"auto"},alignItems:"center"},Object(s.d)(E,null,Object(s.d)("a",{href:"https://github.com/Swizec/useAuth"},"GitHub  ")),Object(s.d)(x,null),Object(s.d)(c.a,{display:{xs:"none",sm:"none",md:"flex"},mt:{base:4,md:0}},Object(s.d)(v.a,{"aria-label":"Switch to "+("light"===t?"dark":"light")+" mode",isRound:"true","border-top-color":"green !important",variant:"ghost",color:"current",ml:"1.735rem",fontSize:"20px",onClick:o,icon:"light"===t?"sun":"moon"}))))};function C(){var e=function(e,n){n||(n=e.slice(0));return e.raw=n,e}(["\n  /*\n    This will hide the focus indicator if the element receives focus via the mouse,\n    but it will still show up on keyboard focus.\n  */\n  .js-focus-visible :focus:not([data-focus-visible-added]) {\n     outline: none;\n     box-shadow: none;\n   }\n\n   html {\n    scroll-behavior: smooth;\n  }\n\n  @media screen and (prefers-reduced-motion: reduce) {\n    html {\n      scroll-behavior: auto;\n    }\n  }\n\n    body {\n        overflow: hidden;\n        padding: 0;\n    }\n\n    .container {\n    height: 90vh;\n    width: 100vw;\n    display: grid;\n    grid-template-columns: 1fr;\n\n    /*  to add a footer, use 1fr 30px(for the footer) etc in grid-template-rows  */\n    grid-template-rows: 1fr;\n    }\n\n    .body {\n        display: grid;\n        grid-template-columns: .75fr 3fr;\n        overflow: hidden;\n        margin-top: 1rem;\n    }\n\n    @media (max-width: 767px) {\n      .body {\n          grid-template-columns: 1fr;\n      }\n    }\n\n    .body p {\n        padding-bottom: 1.25rem;\n    }\n\n\n\n    .sidebar li {\n      margin-bottom: .5rem;\n      font-size: 1rem;\n      font-weight: bold;\n      cursor: pointer;\n    }\n\n\n    .sidenav {\n      list-style-type: none;\n    }\n\n    @media (min-width: 360px) {\n      .sidebar {\n        display: none;\n      }\n    }\n  \n\n    .footer {\n        border-top: 1px solid lightgrey;\n    }\n\n    .content {\n      margin-top: .4rem;\n      overflow-y: scroll;\n    }\n\n\n\n    pre {\n      padding-top: .5rem;\n      padding-left: .5rem;\n      margin-bottom: 1rem;\n      border-radius: 8px;\n      overflow: auto;\n    }\n\n    @media (min-width: 360px) {\n      pre {\n        font-size: .8rem;\n      }\n    }\n\n    @media (min-width: 500px) {\n      pre {\n        font-size: .9rem;\n        color: #569CD6;\n        background-color: #0E0E0E;\n        padding: 4px;\n        border-radius: 3px;\n      }\n    }\n\n    @media (min-width: 768px) {\n      pre {\n        font-size: 1rem;\n        color: #569CD6;\n        background-color: #0E0E0E;\n        padding: 4px;\n        border-radius: 3px;\n      }\n    }\n\n    @media (min-width: 360px) {\n      code {\n        font-size: .9rem;\n        color: #569CD6;\n        background-color: #0E0E0E;\n        padding: 4px;\n        border-radius: 3px;\n      }\n    }\n\n    @media (min-width: 768px) {\n      code {\n        font-size: 1rem;\n        color: #569CD6;\n        background-color: #0E0E0E;\n        padding: 4px;\n        border-radius: 3px;\n      }\n    }\n\n    @media (min-width: 1024px) {\n      code {\n        font-size: 1.1rem;\n        color: #569CD6;\n        background-color: #0E0E0E;\n        padding: 4px;\n        border-radius: 3px;\n      }\n    }\n\n\n\n\n\n\n    \n"]);return C=function(){return e},e}var N=Object(s.c)(C()),z={h1:function(e){return p.a.createElement(a.a,Object.assign({as:"h1",size:"lg",mb:"1.2rem",mt:"-3px"},e))},h2:function(e){return p.a.createElement(a.a,Object.assign({as:"h2",size:"md",mb:"1rem"},e))},h3:function(e){return p.a.createElement(a.a,Object.assign({as:"h3",size:"md",mb:"1rem"},e))}};n.a=function(e){var n=e.children;return p.a.createElement(p.a.Fragment,null,p.a.createElement(o.a,{theme:r.a},p.a.createElement(i.a,null),p.a.createElement(s.a,{styles:N}),p.a.createElement(l.a,null,p.a.createElement(k,null),p.a.createElement(c.a,{className:"container"},p.a.createElement(c.a,{className:"body"},p.a.createElement(c.a,{ml:4,display:{sm:"none",md:"block"},className:"sidebar"},p.a.createElement("ul",{className:"sidenav"},p.a.createElement("li",null),p.a.createElement("li",null,p.a.createElement(u.Link,{to:"./docs/getting-started/"},"Getting Started")),p.a.createElement("li",null,p.a.createElement(u.Link,{to:"./docs/auth/"},"Auth Provider")),p.a.createElement("li",null,p.a.createElement(u.Link,{to:"./docs/callback"},"Callback page")),p.a.createElement("li",null,p.a.createElement(u.Link,{to:"./docs/enjoy"},"Enjoy")))),p.a.createElement(d.a,{components:z},p.a.createElement(c.a,{fontSize:["sm","md","lg","xl"],maxW:"40rem",pl:"2rem",pr:"1rem",width:{sm:"full"},display:"block",className:"content"},n)))))))}},f4Sp:function(e,n,t){"use strict";t.r(n),t.d(n,"_frontmatter",(function(){return r})),t.d(n,"default",(function(){return c}));t("rzGZ"),t("Dq+y"),t("8npG"),t("Ggvi"),t("E5k/"),t("q1tI");var a=t("7ljp"),o=t("8p/1");var r={},i={_frontmatter:r},l=o.a;function c(e){var n=e.components,t=function(e,n){if(null==e)return{};var t,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,["components"]);return Object(a.b)(l,Object.assign({},i,t,{components:n,mdxType:"MDXLayout"}),Object(a.b)("h2",{id:"2-set-up-authprovider",style:{position:"relative"}},Object(a.b)("a",Object.assign({parentName:"h2"},{href:"#2-set-up-authprovider","aria-label":"2 set up authprovider permalink",className:"anchor before"}),Object(a.b)("svg",Object.assign({parentName:"a"},{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"}),Object(a.b)("path",Object.assign({parentName:"svg"},{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"})))),"2. Set up AuthProvider"),Object(a.b)("p",null,"useAuth uses an AuthProvider component to configure the Auth0 client and share state between components. It's using React context with a reducer behind the scenes, but that's an implementation detail."),Object(a.b)("p",null,"I recommend adding this around your root component. In Gatsby that's done in gatsby-browser.js and gatsby-ssr.js. Yes useAuth is built so it doesn't break server-side rendering. ✌️"),Object(a.b)("p",null,'But of course server-side "you" will always be logged out.'),Object(a.b)("pre",null,Object(a.b)("code",Object.assign({parentName:"pre"},{className:"language-jsx"}),'import React from "react"\nimport { navigate } from "gatsby"\n\nimport { AuthProvider } from "react-use-auth"\n\nexport const wrapRootElement = ({ element }) => (\n    <AuthProvider\n      navigate={navigate}\n      auth0_domain="useauth.auth0.com"\n      auth0_client_id="GjWNFNOHqlino7lQNjBwEywalaYtbIzh"\n    >\n      {element}\n      </AuthProvider>\n)\n')),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"<AuthProvider>")," creates a context, sets up a state reducer, initializes an Auth0 client and so on. Everything you need for authentication to work in your whole app :)"),Object(a.b)("p",null,"The API takes a couple config options:"),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"navigate")," – your navigation function, used for redirects. I've tested with Gatsby, but anything should work"),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"auth0_domain")," – from your Auth0 app"),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"auth0_client_id")," – from your Auth0 app"),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"auth0_params")," – an object that lets you overwrite any of the default Auth0 client parameters"),Object(a.b)("p",null,"PS: even though Auth doesn't do anything server-side, useAuth will throw errors during build, if its context doesn't exist"),Object(a.b)("h3",{id:"default-auth0-params",style:{position:"relative"}},Object(a.b)("a",Object.assign({parentName:"h3"},{href:"#default-auth0-params","aria-label":"default auth0 params permalink",className:"anchor before"}),Object(a.b)("svg",Object.assign({parentName:"a"},{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"}),Object(a.b)("path",Object.assign({parentName:"svg"},{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"})))),"Default Auth0 params"),Object(a.b)("p",null,"By default ",Object(a.b)("inlineCode",{parentName:"p"},"useAuth"),"'s Auth0 client uses these params:"),Object(a.b)("pre",null,Object(a.b)("code",Object.assign({parentName:"pre"},{className:"language-jsx"}),'const params = {\n    domain: auth0_domain,\n    clientID: auth0_client_id,\n    redirectUri: `${callback_domain}/auth0_callback`,\n    audience: `https://${auth0_domain}/api/v2/`,\n    responseType: "token id_token",\n    scope: "openid profile email"\n}\n')),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"domain")," and ",Object(a.b)("inlineCode",{parentName:"p"},"clientID")," come from your props."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"redirectUri")," is set to use the ",Object(a.b)("inlineCode",{parentName:"p"},"auth0_callbackpage")," on the current domain. Auth0 redirects here after users login so you can set cookies and stuff. useAuthwill handle this for you ✌️"),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"audience")," is set to use api/v2. I know this is necessary but honestly have been copypasting it through several of my projects."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"responseType")," same here. I copy paste this from old projects so I figured it's a good default."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"scope")," you need openid for social logins and to be able to fetch user profiles after authentication. Profile and Email too. You can add more via the ",Object(a.b)("inlineCode",{parentName:"p"},"auth0_params")," override."))}c.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-docs-auth-mdx-8a523fea82b58e688a94.js.map